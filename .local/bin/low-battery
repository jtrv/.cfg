#!/bin/sh
#!/bin/bash

AC=$(cat "/sys/class/power_supply/AC/online")
BAT=$(cat "/sys/class/power_supply/BAT0/capacity")
ENERGY_NOW=$(cat "/sys/class/power_supply/BAT0/energy_now")
POWER_NOW=$(cat "/sys/class/power_supply/BAT0/power_now")

if [ "$AC" -eq 0 ]; then
	if [ "$BAT" -le 30 ]; then
		TIME_LEFT=$(echo "scale=2; $ENERGY_NOW/$POWER_NOW" | bc)
		MINUTES=$(echo "$TIME_LEFT * 60" | bc | cut -d'.' -f 1)
		notify-send \
			-u critical \
			-t 60000\
			"LOW BATTERY"\
			"${BAT}% or ~${MINUTES}m remain\n Plug in charger soon"
	fi
fi
